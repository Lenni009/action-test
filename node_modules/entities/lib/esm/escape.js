export const xmlReplacer=/["&'<>$\x80-\uFFFF]/g;const xmlCodeMap=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);export const getCodePoint=null!=String.prototype.codePointAt?(e,t)=>e.codePointAt(t):(e,t)=>55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);export function encodeXML(e){let t,o="",n=0;for(;null!==(t=xmlReplacer.exec(e));){const r=t.index,c=e.charCodeAt(r),p=xmlCodeMap.get(c);void 0!==p?(o+=e.substring(n,r)+p,n=r+1):(o+=`${e.substring(n,r)}&#x${getCodePoint(e,r).toString(16)};`,n=xmlReplacer.lastIndex+=Number(55296==(64512&c)))}return o+e.substr(n)}export const escape=encodeXML;function getEscaper(e,t){return function(o){let n,r=0,c="";for(;n=e.exec(o);)r!==n.index&&(c+=o.substring(r,n.index)),c+=t.get(n[0].charCodeAt(0)),r=n.index+1;return c+o.substring(r)}}export const escapeUTF8=getEscaper(/[&<>'"]/g,xmlCodeMap);export const escapeAttribute=getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]]));export const escapeText=getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));
