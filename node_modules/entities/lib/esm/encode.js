import htmlTrie from"./generated/encode-html.js";import{xmlReplacer,getCodePoint}from"./escape.js";const htmlReplacer=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;export function encodeHTML(e){return encodeHTMLTrieRe(htmlReplacer,e)}export function encodeNonAsciiHTML(e){return encodeHTMLTrieRe(xmlReplacer,e)}function encodeHTMLTrieRe(e,t){let n,o="",r=0;for(;null!==(n=e.exec(t));){const c=n.index;o+=t.substring(r,c);const i=t.charCodeAt(c);let l=htmlTrie.get(i);if("object"==typeof l){if(c+1<t.length){const n=t.charCodeAt(c+1),i="number"==typeof l.n?l.n===n?l.o:void 0:l.n.get(n);if(void 0!==i){o+=i,r=e.lastIndex+=1;continue}}l=l.v}if(void 0!==l)o+=l,r=c+1;else{const n=getCodePoint(t,c);o+=`&#x${n.toString(16)};`,r=e.lastIndex+=Number(n!==i)}}return o+t.substr(r)}
