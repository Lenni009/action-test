import{parse}from"css-what";import{filters}from"./filters.js";import{pseudos,verifyPseudoArgs}from"./pseudos.js";import{aliases}from"./aliases.js";import{subselects}from"./subselects.js";export{filters,pseudos,aliases};export function compilePseudoSelector(s,e,r,o,t){var i;const{name:n,data:u}=e;if(Array.isArray(u)){if(!(n in subselects))throw new Error(`Unknown pseudo-class :${n}(${u})`);return subselects[n](s,u,r,o,t)}const f=null===(i=r.pseudos)||void 0===i?void 0:i[n],a="string"==typeof f?f:aliases[n];if("string"==typeof a){if(null!=u)throw new Error(`Pseudo ${n} doesn't have any arguments`);const e=parse(a);return subselects.is(s,e,r,o,t)}if("function"==typeof f)return verifyPseudoArgs(f,n,u,1),e=>f(e,u)&&s(e);if(n in filters)return filters[n](s,u,r,o);if(n in pseudos){const e=pseudos[n];return verifyPseudoArgs(e,n,u,2),o=>e(o,r,u)&&s(o)}throw new Error(`Unknown pseudo-class :${n}`)}
