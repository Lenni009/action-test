"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.attributeRules=void 0;var boolbase_1=__importDefault(require("boolbase")),reChars=/[-[\]{}()*+?.,\\^$|#\s]/g;function escapeRegex(e){return e.replace(reChars,"\\$&")}var caseInsensitiveAttributes=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function shouldIgnoreCase(e,t){return"boolean"==typeof e.ignoreCase?e.ignoreCase:"quirks"===e.ignoreCase?!!t.quirksMode:!t.xmlMode&&caseInsensitiveAttributes.has(e.name)}exports.attributeRules={equals:function(e,t,r){var n=r.adapter,a=t.name,u=t.value;return shouldIgnoreCase(t,r)?(u=u.toLowerCase(),function(t){var r=n.getAttributeValue(t,a);return null!=r&&r.length===u.length&&r.toLowerCase()===u&&e(t)}):function(t){return n.getAttributeValue(t,a)===u&&e(t)}},hyphen:function(e,t,r){var n=r.adapter,a=t.name,u=t.value,o=u.length;return shouldIgnoreCase(t,r)?(u=u.toLowerCase(),function(t){var r=n.getAttributeValue(t,a);return null!=r&&(r.length===o||"-"===r.charAt(o))&&r.substr(0,o).toLowerCase()===u&&e(t)}):function(t){var r=n.getAttributeValue(t,a);return null!=r&&(r.length===o||"-"===r.charAt(o))&&r.substr(0,o)===u&&e(t)}},element:function(e,t,r){var n=r.adapter,a=t.name,u=t.value;if(/\s/.test(u))return boolbase_1.default.falseFunc;var o=new RegExp("(?:^|\\s)".concat(escapeRegex(u),"(?:$|\\s)"),shouldIgnoreCase(t,r)?"i":"");return function(t){var r=n.getAttributeValue(t,a);return null!=r&&r.length>=u.length&&o.test(r)&&e(t)}},exists:function(e,t,r){var n=t.name,a=r.adapter;return function(t){return a.hasAttrib(t,n)&&e(t)}},start:function(e,t,r){var n=r.adapter,a=t.name,u=t.value,o=u.length;return 0===o?boolbase_1.default.falseFunc:shouldIgnoreCase(t,r)?(u=u.toLowerCase(),function(t){var r=n.getAttributeValue(t,a);return null!=r&&r.length>=o&&r.substr(0,o).toLowerCase()===u&&e(t)}):function(t){var r;return!!(null===(r=n.getAttributeValue(t,a))||void 0===r?void 0:r.startsWith(u))&&e(t)}},end:function(e,t,r){var n=r.adapter,a=t.name,u=t.value,o=-u.length;return 0===o?boolbase_1.default.falseFunc:shouldIgnoreCase(t,r)?(u=u.toLowerCase(),function(t){var r;return(null===(r=n.getAttributeValue(t,a))||void 0===r?void 0:r.substr(o).toLowerCase())===u&&e(t)}):function(t){var r;return!!(null===(r=n.getAttributeValue(t,a))||void 0===r?void 0:r.endsWith(u))&&e(t)}},any:function(e,t,r){var n=r.adapter,a=t.name,u=t.value;if(""===u)return boolbase_1.default.falseFunc;if(shouldIgnoreCase(t,r)){var o=new RegExp(escapeRegex(u),"i");return function(t){var r=n.getAttributeValue(t,a);return null!=r&&r.length>=u.length&&o.test(r)&&e(t)}}return function(t){var r;return!!(null===(r=n.getAttributeValue(t,a))||void 0===r?void 0:r.includes(u))&&e(t)}},not:function(e,t,r){var n=r.adapter,a=t.name,u=t.value;return""===u?function(t){return!!n.getAttributeValue(t,a)&&e(t)}:shouldIgnoreCase(t,r)?(u=u.toLowerCase(),function(t){var r=n.getAttributeValue(t,a);return(null==r||r.length!==u.length||r.toLowerCase()!==u)&&e(t)}):function(t){return n.getAttributeValue(t,a)!==u&&e(t)}}};
